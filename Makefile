.PHONY: help setup build install clean

help:
 @echo "–ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:"
 @echo "  make setup   - –ì–ª–∞–≤–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç —è–¥—Ä–æ."
 @echo "  make build   - (–ü–µ—Ä–µ)—Å–æ–±–∏—Ä–∞–µ—Ç Rust-—è–¥—Ä–æ –ø–æ–¥ –≤–∞—à—É –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É."
 @echo "  make install - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç/–æ–±–Ω–æ–≤–ª—è–µ—Ç Python-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏."
 @echo "  make clean   - –£–¥–∞–ª—è–µ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —Å–±–æ—Ä–∫–∏."

# –û–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞, —á—Ç–æ–±—ã –≤—Å—ë –∑–∞—Ä–∞–±–æ—Ç–∞–ª–æ.
# –°–Ω–∞—á–∞–ª–∞ —Å—Ç–∞–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –ø–æ—Ç–æ–º –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç Rust.
setup: install build
 @echo "‚úÖ –ì–æ—Ç–æ–≤–æ! –ü—Ä–æ–µ–∫—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω. –ú–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å."

build:
 @echo "‚öôÔ∏è  –ö–æ–º–ø–∏–ª–∏—Ä—É—é Rust-—è–¥—Ä–æ..."
 docker run --rm -v $(pwd):/io ghcr.io/pyo3/maturin build --release -i python3.11 -o dist
 @echo "üì¶ –°–±–æ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞. Wheel-—Ñ–∞–π–ª –≤ –ø–∞–ø–∫–µ dist/."

install:
 @echo "üêç –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é Python-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏..."
 poetry install

clean:
 @echo "üßπ –û—á–∏—â–∞—é –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —Å–±–æ—Ä–∫–∏..."
 rm -rf target/ dist/ *.egg-info build/
